# 面试题

## 1. 怎么查看一条语句用了什么索引？（oppo）

explain SQL语句





一条查询语句在经过`MySQL`查询优化器的各种基于成本和规则的优化会后生成一个所谓的`执行计划`，这个执行计划展示了接下来具体执行查询的方式，比如多表连接的顺序是什么，对于每个表采用什么访问方法来具体执行查询等等。

如果我们想看看某个查询的执行计划的话，可以在具体的查询语句前边加一个`EXPLAIN`，就像这样：

```
mysql> EXPLAIN SELECT 1;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra          |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+
|  1 | SIMPLE      | NULL  | NULL       | NULL | NULL          | NULL | NULL    | NULL | NULL |     NULL | No tables used |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+
1 row in set, 1 warning (0.01 sec)
```

|      列名       | 描述                                                       |
| :-------------: | :--------------------------------------------------------- |
|      `id`       | 在一个大的查询语句中每个`SELECT`关键字都对应一个唯一的`id` |
|  `select_type`  | `SELECT`关键字对应的那个查询的类型                         |
|     `table`     | 表名                                                       |
|  `partitions`   | 匹配的分区信息                                             |
|     `type`      | 针对单表的访问方法                                         |
| `possible_keys` | 可能用到的索引                                             |
|      `key`      | 实际上使用的索引                                           |
|    `key_len`    | 实际使用到的索引长度                                       |
|      `ref`      | 当使用索引列等值查询时，与索引列进行等值匹配的对象信息     |
|     `rows`      | 预估的需要读取的记录条数                                   |
|   `filtered`    | 某个表经过搜索条件过滤后剩余记录条数的百分比               |
|     `Extra`     | 一些额外的信息                                             |

## 执行计划输出中各列详解

