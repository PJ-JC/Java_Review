# 缓存雪崩

简介：**缓存同一时间大面积的失效，所以，后面的请求都会落到数据库上，造成数据库短时间内承受大量请求而崩掉。**

解决办法（中华石杉老师在他的视频中提到过，视频地址在最后一个问题中有提到）：

事前：尽量保证整个 **redis 集群的高可用性**，发现机器宕机尽快补上。选择**合适的内存淘汰策略**。

事中：**本地ehcache缓存 + hystrix限流&降级**，避免MySQL崩掉

事后：利用 redis **持久化机制**保存的数据尽快恢复缓存

# 缓存穿透

简介：一般是黑客故意去**请求缓存中不存在的数据，导致所有的请求都落到数据库上**，造成数据库短时间内承受大量请求而崩掉。

![](https://raw.githubusercontent.com/wuqifan1098/picBed/master/20190529205729.png)

解决缓存穿透也有两种方案：

- 由于请求的参数是不合法的(每次都请求不存在的参数)，于是我们可以使用布隆过滤器(BloomFilter)或者压缩filter**提前拦截**，不合法就不让这个请求到数据库层！

- 当我们从数据库找不到的时候，我们也将这个**空对象设置到缓存里边去**。下次再请求的时候，就可以从缓存里边获取了。

- 这种情况我们一般会将空对象设置一个**较短的过期时间**。

